{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/badri/OneDrive/Desktop/StudentResults/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/badri/OneDrive/Desktop/StudentResults/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\badri\\\\OneDrive\\\\Desktop\\\\StudentResults\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState}from'react';import React from\"react\";import*as XLSX from\"xlsx\";import{Navigate,useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var StudentDet=function StudentDet(){var _useState=useState(),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setfiles=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),name=_useState4[0],setName=_useState4[1];var _useState5=useState(localStorage.getItem('tid')),_useState6=_slicedToArray(_useState5,2),te=_useState6[0],sette=_useState6[1];var onChange=function onChange(e){setName(e.target.files[0][\"name\"]);var _e$target$files=_slicedToArray(e.target.files,1),file=_e$target$files[0];var reader=new FileReader();reader.onload=function(evt){var bstr=evt.target.result;var wb=XLSX.read(bstr,{type:\"binary\"});var wsname=wb.SheetNames[0];var ws=wb.Sheets[wsname];var data=XLSX.utils.sheet_to_json(ws);setfiles(data);};reader.readAsBinaryString(file);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();console.log(files);_context.next=4;return fetch('https://vignanminiproject.herokuapp.com/excel',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({files:files})});case 4:res=_context.sent;_context.next=7;return res.json();case 7:data=_context.sent;if(data.status==='ok'){alert(\"successful\");}else{alert(data.error);}case 9:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var Func=function Func(){return/*#__PURE__*/_jsx(\"section\",{className:\"user1\",id:\"user1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user signinBx\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imgBx\",children:/*#__PURE__*/_jsx(\"lottie-player\",{src:\"https://assets10.lottiefiles.com/packages/lf20_h9rxcjpi.json\",background:\"transparent\",speed:\"1\",style:{width:\"100%\",height:\"100%\"},loop:true,autoplay:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"formBx\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Student Details Upload\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",id:\"lab\",children:\"Add file\"}),/*#__PURE__*/_jsx(\"input\",{autocomplete:\"off\",type:\"file\",id:\"file\",onChange:onChange,style:{display:'none'}}),/*#__PURE__*/_jsxs(\"p\",{children:[\"File Name : \",/*#__PURE__*/_jsx(\"strong\",{children:name})]}),/*#__PURE__*/_jsx(\"input\",{autocomplete:\"off\",type:\"submit\"})]})})]})})});};return te?/*#__PURE__*/_jsx(Func,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"});};export default StudentDet;","map":{"version":3,"sources":["C:/Users/badri/OneDrive/Desktop/StudentResults/client/src/components/StudentDet.jsx"],"names":["useState","React","XLSX","Navigate","useNavigate","StudentDet","files","setfiles","name","setName","localStorage","getItem","te","sette","onChange","e","target","file","reader","FileReader","onload","evt","bstr","result","wb","read","type","wsname","SheetNames","ws","Sheets","data","utils","sheet_to_json","readAsBinaryString","handleSubmit","preventDefault","console","log","fetch","method","headers","body","JSON","stringify","res","json","status","alert","error","Func","width","height","display"],"mappings":"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","sourcesContent":["import {useState} from 'react'\r\nimport React from \"react\";\r\nimport * as XLSX from \"xlsx\";\r\nimport { Navigate ,useNavigate} from 'react-router-dom'\r\n\r\nconst StudentDet = () => {\r\n  const [files,setfiles] = useState();\r\n  const [name,setName] = useState(\"\");\r\n  const [te,sette] =  useState(localStorage.getItem('tid'));\r\n\r\n  const onChange = (e) => {\r\n    setName(e.target.files[0][\"name\"]);\r\n    const [file] = e.target.files;\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = (evt) => {\r\n      const bstr = evt.target.result;\r\n      const wb = XLSX.read(bstr, { type: \"binary\" });\r\n      const wsname = wb.SheetNames[0];\r\n      const ws = wb.Sheets[wsname];\r\n      const data = XLSX.utils.sheet_to_json(ws);\r\n      setfiles(data);\r\n    };\r\n    reader.readAsBinaryString(file);\r\n  };\r\n\r\n  const handleSubmit = async(e) => {\r\n\r\n    e.preventDefault();\r\n\r\n    console.log(files);\r\n    const res = await fetch('https://vignanminiproject.herokuapp.com/excel',{\r\n        method:'POST',\r\n        headers: {\r\n             'Content-Type' : 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            files\r\n        })\r\n    })\r\n\r\n    const data = await res.json()\r\n    if(data.status === 'ok'){\r\n        alert(\"successful\");\r\n    }\r\n    else{\r\n        alert(data.error)\r\n    }\r\n    \r\n}\r\n\r\nconst Func = () => {\r\n  return (\r\n    <section className=\"user1\" id=\"user1\">\r\n        <div className=\"container2\">\r\n            <div className=\"user signinBx\">\r\n                <div className=\"imgBx\">\r\n                    <lottie-player src=\"https://assets10.lottiefiles.com/packages/lf20_h9rxcjpi.json\"  background=\"transparent\"  speed=\"1\"  style={{width: \"100%\" , height: \"100%\"}}  loop  autoplay></lottie-player>\r\n                </div>\r\n                <div className=\"formBx\">\r\n                    <form onSubmit={handleSubmit}>\r\n                    <h2>Student Details Upload</h2>\r\n                    <label htmlFor=\"file\" id=\"lab\">Add file</label>\r\n                    <input autocomplete=\"off\" type=\"file\" id=\"file\" onChange={onChange} style={{display : 'none'}}/>\r\n                    <p>File Name : <strong>{name}</strong></p>\r\n                    <input autocomplete=\"off\" type=\"submit\"  />\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n  )\r\n}\r\n\r\nreturn ( te ? <Func/> : <Navigate to =\"/\" />)\r\n}\r\n\r\nexport default StudentDet"]},"metadata":{},"sourceType":"module"}