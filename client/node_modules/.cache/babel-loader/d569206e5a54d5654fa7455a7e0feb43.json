{"ast":null,"code":"import _asyncToGenerator from\"C:/Users/badri/OneDrive/Desktop/StudentResults/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/badri/OneDrive/Desktop/StudentResults/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"C:\\\\Users\\\\badri\\\\OneDrive\\\\Desktop\\\\StudentResults\\\\client\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import{useState}from'react';import{Navigate,useNavigate}from'react-router-dom';import React from\"react\";import*as XLSX from\"xlsx\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Results=function Results(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),files=_useState2[0],setfiles=_useState2[1];var navigate=useNavigate();var _useState3=useState(localStorage.getItem('tid')),_useState4=_slicedToArray(_useState3,2),te=_useState4[0],sette=_useState4[1];var onChange=function onChange(e){var _e$target$files=_slicedToArray(e.target.files,1),file=_e$target$files[0];var reader=new FileReader();reader.onload=function(evt){var bstr=evt.target.result;var wb=XLSX.read(bstr,{type:\"binary\"});var wsname=wb.SheetNames[0];var ws=wb.Sheets[wsname];var data=XLSX.utils.sheet_to_json(ws);setfiles(data);};reader.readAsBinaryString(file);};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var res,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return fetch('https://vignanminiproject.herokuapp.com/results',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({files:files})});case 3:res=_context.sent;_context.next=6;return res.json();case 6:data=_context.sent;if(data.status==='ok'){setfiles([]);alert(\"successful\");// navigate(\"/results\");\n}else{// setfiles([]);\nalert(data.message);navigate(\"/results\");}case 8:case\"end\":return _context.stop();}}},_callee);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();var Func=function Func(){return/*#__PURE__*/_jsx(\"section\",{className:\"user1\",id:\"user1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"user signinBx\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"imgBx\",children:/*#__PURE__*/_jsx(\"lottie-player\",{src:\"https://assets10.lottiefiles.com/packages/lf20_h9rxcjpi.json\",background:\"transparent\",speed:\"1\",style:{width:\"100%\",height:\"100%\"},loop:true,autoplay:true})}),/*#__PURE__*/_jsx(\"div\",{className:\"formBx\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Student Results\"}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"file\",id:\"lab\",children:\"Add file\"}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"file\",onChange:onChange,style:{display:'none'}}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\"})]})})]})})});};return te?/*#__PURE__*/_jsx(Func,{}):/*#__PURE__*/_jsx(Navigate,{to:\"/\"});};export default Results;","map":{"version":3,"sources":["C:/Users/badri/OneDrive/Desktop/StudentResults/client/src/components/Results.jsx"],"names":["useState","Navigate","useNavigate","React","XLSX","Results","files","setfiles","navigate","localStorage","getItem","te","sette","onChange","e","target","file","reader","FileReader","onload","evt","bstr","result","wb","read","type","wsname","SheetNames","ws","Sheets","data","utils","sheet_to_json","readAsBinaryString","handleSubmit","preventDefault","fetch","method","headers","body","JSON","stringify","res","json","status","alert","message","Func","width","height","display"],"mappings":"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","sourcesContent":["import {useState} from 'react'\r\nimport { Navigate,useNavigate} from 'react-router-dom'\r\nimport React from \"react\";\r\n\r\nimport * as XLSX from \"xlsx\";\r\n\r\nconst Results = () => {\r\n  const [files,setfiles] = useState([]);\r\n  const navigate = useNavigate();\r\n  const [te,sette] =  useState(localStorage.getItem('tid'));\r\n\r\n\r\n  const onChange = (e) => {\r\n    const [file] = e.target.files;\r\n    const reader = new FileReader();\r\n\r\n    reader.onload = (evt) => {\r\n      const bstr = evt.target.result;\r\n      const wb = XLSX.read(bstr, { type: \"binary\" });\r\n      const wsname = wb.SheetNames[0];\r\n      const ws = wb.Sheets[wsname];\r\n      const data = XLSX.utils.sheet_to_json(ws);\r\n      setfiles(data);\r\n    };\r\n    reader.readAsBinaryString(file);\r\n  };\r\n\r\n  const handleSubmit = async(e) => {\r\n\r\n    e.preventDefault();\r\n\r\n    const res = await fetch('https://vignanminiproject.herokuapp.com/results',{\r\n        method:'POST',\r\n        headers: {\r\n             'Content-Type' : 'application/json'\r\n        },\r\n        body: JSON.stringify({\r\n            files\r\n        })\r\n    })\r\n\r\n    // console.log(files);\r\n\r\n\r\n    const data = await res.json()\r\n    if(data.status === 'ok'){\r\n        setfiles([]);\r\n        alert(\"successful\");\r\n        // navigate(\"/results\");\r\n    }\r\n    else{\r\n        // setfiles([]);\r\n        alert(data.message);\r\n        navigate(\"/results\");\r\n    }\r\n    \r\n    \r\n}\r\n\r\nconst Func = () => {\r\n  return (\r\n    <section className=\"user1\" id=\"user1\">\r\n        <div className=\"container2\">\r\n            <div className=\"user signinBx\">\r\n                <div className=\"imgBx\">\r\n                    <lottie-player src=\"https://assets10.lottiefiles.com/packages/lf20_h9rxcjpi.json\"  background=\"transparent\"  speed=\"1\"  style={{width: \"100%\" , height: \"100%\"}}  loop  autoplay></lottie-player>\r\n                </div>\r\n                <div className=\"formBx\">\r\n                    <form onSubmit={handleSubmit}>\r\n                    <h2>Student Results</h2>\r\n                    <label htmlFor=\"file\" id=\"lab\">Add file</label>\r\n                    <input type=\"file\" id=\"file\" onChange={onChange} style={{display : 'none'}}/>\r\n                    <input type=\"submit\"  />\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </section>\r\n  )\r\n}\r\nreturn ( te ? <Func/> : <Navigate to =\"/\" />)\r\n}\r\n\r\nexport default Results"]},"metadata":{},"sourceType":"module"}